@import url('https://fonts.googleapis.com/css2?family=Pinyon+Script&family=Cinzel:wght@400;700&family=Cormorant+Garamond:ital,wght@0,400;0,600;1,700&display=swap');

:root {
    --ancho: 460px; --alto: 680px; --grosor: 50px; 
    --papel: #fdf6e3; --dorado: #e6cfa0; --texto-color: #1a0505;
}

body {
    margin: 0; height: 100vh; background-color: #050510;
    background-image: url('../media/img/fondo.jpg');
    background-size: cover; background-position: center; background-attachment: fixed;
    display: flex; justify-content: center; align-items: center;
    overflow: hidden; perspective: 3500px;
}
body::after { content: ''; position: absolute; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.6); pointer-events: none; z-index: -2; }

/* CIELO */
#cielo-interactivo { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 0; pointer-events: none; overflow: hidden; }

/* ESTRELLAS Y COMETAS */
.estrella-interactiva { position: absolute; background: white; border-radius: 50%; cursor: pointer; pointer-events: auto; transition: transform 0.2s; box-shadow: 0 0 5px rgba(255,255,255,0.8); }
.estrella-interactiva:hover { transform: scale(2); box-shadow: 0 0 20px #fff; }
.mensaje-estrella { position: absolute; color: var(--dorado); font-family: 'Pinyon Script', cursive; font-size: 2rem; text-shadow: 0 2px 10px black; pointer-events: none; animation: subir 4s forwards; white-space: nowrap; z-index: 20; }
@keyframes subir { 0% { opacity:0; transform:translateY(0); } 20% { opacity:1; } 100% { opacity:0; transform:translateY(-100px); } }

.cometa-realista { position: absolute; height: 2px; background: linear-gradient(90deg, rgba(255,255,255,0), #fff); border-radius: 50%; filter: drop-shadow(0 0 8px white); opacity: 0; pointer-events: none; z-index: 5; animation-name: viajeCometa; animation-duration: 4s; animation-timing-function: ease-out; animation-fill-mode: forwards; }
.cometa-realista::after { content: ''; position: absolute; right: 0; top: 50%; transform: translateY(-50%); width: 4px; height: 4px; background: #fff; border-radius: 50%; box-shadow: 0 0 15px #fff, 0 0 30px #89cff0; }
@keyframes viajeCometa { 0% { transform: translate(-200px, -200px) rotate(35deg); opacity: 0; } 10% { opacity: 1; } 100% { transform: translate(150vw, 150vh) rotate(35deg); opacity: 0; } }

/* LIBRO */
.escenario { width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; position: relative; z-index: 50; pointer-events: none; }
.libro { width: var(--ancho); height: var(--alto); position: relative; transform-style: preserve-3d; transition: transform 1.2s cubic-bezier(0.25, 1, 0.5, 1), width 1s, height 1s; box-shadow: 0 30px 80px rgba(0,0,0,0.8); pointer-events: auto; }
.libro.cerrado { animation: flotar 6s ease-in-out infinite; }
@keyframes flotar { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-20px); } }
.libro.abierto { transform: translateX(50%); }
.libro.girado { transform: rotateY(180deg); }
.libro.girado .hoja { opacity: 0 !important; visibility: hidden !important; pointer-events: none; transition: opacity 0.2s; }
.libro.girado .lomo { opacity: 1; }

/* COMPONENTES */
.lomo { position: absolute; top: 0; left: 0; width: var(--grosor); height: 100%; background: linear-gradient(to right, #050510, #3a1a1a, #050510); transform: rotateY(90deg) translateZ(calc(var(--grosor) / -2)); z-index: 500; }
.tapa-trasera { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: #0a0a1a url('../media/img/contraportada.jpg') center/cover; transform: translateZ(calc(var(--grosor) * -1)) rotateY(180deg); border-radius: 3px 15px 15px 3px; box-shadow: inset 0 0 150px rgba(0,0,0,0.8); display: flex; justify-content: center; align-items: center; flex-direction: column; backface-visibility: visible; z-index: 600; cursor: pointer; }
.dedicatoria-final { text-align: center; transform: scaleX(-1); width: 80%; z-index: 610; }
.titulo-dedicatoria { font-family: 'Pinyon Script'; font-size: 3.5rem; color: var(--dorado); margin: 0; }
.dedicatoria-final p { font-family: 'Cinzel'; color: #e6cfa0; font-size: 1.2rem; }
.fecha { border-top: 1px solid rgba(230,207,160,0.3); padding-top: 15px; margin-top: 20px; display: inline-block; }

/* HOJAS */
.hoja {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    background: var(--papel) url('https://www.transparenttextures.com/patterns/old-map.png');
    border-radius: 3px 12px 12px 3px; transform-origin: left center; transform-style: preserve-3d;
    transition: transform 1s, opacity 0.5s; border: 1px solid #dcd0b0;
    box-shadow: inset 25px 0 40px rgba(0,0,0,0.05); padding: 40px; box-sizing: border-box;
    display: flex; flex-direction: column; overflow: hidden; backface-visibility: visible;
    /* Cursor para indicar que se puede hacer clic en toda la hoja */
    cursor: pointer; 
}
.hoja.portada { background: #000 url('../media/img/portada.jpg') center/cover; border: none; border-right: 4px solid #a88b4a; padding: 0; }
.hoja.pasada { transform: rotateY(-180deg); filter: blur(2px); pointer-events: auto; /* IMPORTANTE: auto para poder clic y volver */ box-shadow: inset -25px 0 40px rgba(0,0,0,0.1); }

/* PÁGINA AZUL */
.hoja.azul-triste { background-image: none !important; background-color: #080c14 !important; background: radial-gradient(at center, #1b2735, #090a0f); border-color: #1e2a4a; color: #aab8c2; }
.hoja.azul-triste h2 { color: #89cff0; border-color: #2c3e50; }
.hoja.azul-triste p { color: #aab8c2; font-weight: 400; }
.hoja.azul-triste .cita { background: rgba(137, 207, 240, 0.1); border-left-color: #89cff0; color: #d0e6f5; }
.hoja.azul-triste h3 { color: #89cff0; border-bottom-color: rgba(137, 207, 240, 0.3); }
.hoja.azul-triste .num-pag { color: #5d8aa8; }

.broche { position: absolute; top: 50%; right: -12px; width: 30px; height: 70px; background: linear-gradient(to right, #bf9b30, #fcf6ba, #725410); border-radius: 0 5px 5px 0; z-index: 60; box-shadow: 2px 2px 5px rgba(0,0,0,0.5); }

/* ESTILOS TEXTO */
h2 { font-family: 'Cinzel'; color: #5a0000; border-bottom: 2px solid var(--dorado); margin-bottom: 15px; font-size: 1.6rem; text-align: center; }
p { font-family: 'Cormorant Garamond'; font-size: 1.15rem; color: var(--texto-color); font-weight: 600; text-align: justify; line-height: 1.5; margin-bottom: 15px; }
h3 { font-family: 'Pinyon Script', cursive; color: #800000; font-size: 1.8rem; margin: 10px 0 5px 0; text-align: center; border-bottom: 1px dashed rgba(128, 0, 0, 0.2); }
.resaltado { color: #800000; font-weight: 700; font-style: italic; }
.cita { border-left: 3px solid #e6cfa0; padding-left: 15px; margin: 15px 0; font-style: italic; color: #333; background: rgba(230,207,160,0.1); padding: 10px; border-radius: 5px; }
.frase-impacto { text-align: center; color: #5a0000; font-weight: bold; font-size: 1.2rem; margin: 20px 0; font-family: 'Cinzel'; border-top: 1px solid rgba(230,207,160,0.5); border-bottom: 1px solid rgba(230,207,160,0.5); padding: 10px 0; }
.marco-gif { width: 100%; height: 160px; border: 3px double #e6cfa0; margin: 15px 0; overflow: hidden; display: flex; justify-content: center; align-items: center; background: rgba(0,0,0,0.05); border-radius: 4px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
.marco-gif img { width: 100%; height: 100%; object-fit: cover; }

/* BOTÓN (Z-INDEX ALTO para que funcione) */
.btn { margin-top: auto; align-self: flex-end; border: 2px solid #5a0000; color: #5a0000; padding: 8px 20px; font-family: 'Cinzel'; font-weight: bold; background: transparent; cursor: pointer; position: relative; z-index: 100; transition: transform 0.2s; }
.btn:active { transform: scale(0.95); }
.btn-azul { border-color: #89cff0; color: #89cff0; }
.btn-azul:hover { background: #89cff0; color: #000; }

.zona-volver { position: absolute; top:0; right:0; width: 60px; height: 100%; cursor: pointer; z-index: 10; display: none; /* OCULTAMOS ESTO PORQUE AHORA TODA LA HOJA ES ZONA VOLVER */ }
.num-pag { position: absolute; bottom: 10px; left: 50%; transform: translateX(-50%); color: #888; font-family: 'Cinzel'; font-size: 0.9rem; pointer-events: none; letter-spacing: 2px; }
.num-pag::before { content: '• '; color: var(--dorado); } .num-pag::after { content: ' •'; color: var(--dorado); }

/* CONTROLES */
.barra-controles { position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%); display: flex; gap: 20px; z-index: 1000; background: rgba(0,0,0,0.6); padding: 10px 30px; border-radius: 50px; backdrop-filter: blur(5px); }
.btn-control { background: transparent; border: 1px solid var(--dorado); color: var(--dorado); padding: 10px 20px; font-family: 'Cinzel'; cursor: pointer; border-radius: 20px; transition: 0.3s; }
.btn-control:hover { background: var(--dorado); color: #000; }

/* ADAPTACIÓN MÓVIL */
@media (max-width: 768px) {
    :root { --ancho: 45vw; --alto: 65vw; --grosor: 15px; }
    .libro.cerrado { width: 80vw !important; height: 120vw !important; }
    .libro.abierto { width: 45vw !important; height: 65vw !important; transform: translateX(50%) !important; }
    .hoja { padding: 10px; }
    p { font-size: 0.65rem; line-height: 1.25; margin-bottom: 6px; }
    h2 { font-size: 0.9rem; margin-bottom: 5px; }
    h3 { font-size: 0.8rem; margin: 5px 0; }
    .frase-impacto { font-size: 0.75rem; margin: 10px 0; padding: 5px 0; }
    .cita { font-size: 0.7rem; padding: 5px; margin: 5px 0; }
    .marco-gif { height: 80px; margin: 5px 0; }
    .btn { padding: 3px 6px; font-size: 0.6rem; border-width: 1px; }
    .barra-controles { width: 95%; padding: 5px; gap: 5px; bottom: 10px; background: rgba(0,0,0,0.9); }
    .btn-control { font-size: 0.6rem; padding: 5px; flex: 1; }
    .dedicatoria-final { width: 90%; }
    .titulo-dedicatoria { font-size: 1.5rem; }
    .dedicatoria-final p { font-size: 0.8rem; }
}
